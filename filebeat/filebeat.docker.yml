filebeat.autodiscover:
    providers:
        -   type: docker
            templates:
                -   condition:
                        contains:
                            docker.container.name: admin-store
                    config:
                        -   type: filestream
                            id: container-${data.docker.container.id}
                            prospector.scanner.symlinks: true
                            parsers:
                                -   container: ~
                            paths:
                                - /var/lib/docker/containers/${data.docker.container.id}/*.log
                            exclude_lines: [ "^\\s+[\\-`('.|_]" ]

output.elasticsearch:
    hosts: [ "http://elastic-search:9200" ]
    username: ${ELASTIC_USERNAME}
    password: ${ELASTIC_PASSWORD}
    index: "filebeat-%{[agent.version]}-%{+yyyy.MM.dd}"
    
setup.template.enabled: true
setup.template.name: "filebeat"
setup.template.pattern: "filebeat-*"